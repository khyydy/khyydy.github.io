"use strict";(self["webpackChunkkaoshikeys"]=self["webpackChunkkaoshikeys"]||[]).push([[535],{9344:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"Login"},[e._m(0),s("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline}},[s("FormItem",{attrs:{prop:"username"}},[s("Input",{attrs:{type:"text",autofocus:"",placeholder:"工号"},model:{value:e.formInline.username,callback:function(t){e.$set(e.formInline,"username",t)},expression:"formInline.username"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-contact-outline"},slot:"prepend"})],1)],1),s("FormItem",{attrs:{prop:"password"}},[s("Input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}},[s("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),s("FormItem",[s("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formInline")}}},[e._v("登录")]),s("router-link",{attrs:{to:"/recharge"}},[s("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"}},[e._v("充值")])],1)],1)],1),s("p",{staticStyle:{"text-align":"left"}},[e._v(" 输入考核云平台账号信息即可，如忘记密码请去App上进行重置。 ")])],1)},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{margin:"20px"}},[s("h2",[e._v("用户登录")])])}],i={data(){return{formInline:{username:"",password:""},isVip:!1,ruleInline:{username:[{required:!0,message:"请输入工号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{type:"string",min:6,message:"密码不能少于6位",trigger:"blur"}]}}},methods:{checkVip(e){let t=2,s="DIy5BmbglwD4uQxwjYaplaBJLO5tQmYL",r="kaoheyun"+e.username,a="kaoheyun"+e.userid;this.$axios.get("http://111.229.103.199/app_user_api/userregister",{params:{app_id:t,secret_key:s,username:r,password:a,enpassword:a}}).then((()=>{this.$axios.get("http://111.229.103.199/app_user_api/getusertoken",{params:{app_id:t,secret_key:s,username:r,password:a}}).then((s=>{if(s.data.code){let a=s.data.data.token;this.$axios.get("http://111.229.103.199/app_user_api/getuserapp",{params:{app_id:t,token:a,device_code:r}}).then((t=>{t.data.code?(t.data.data.points&&(this.isVip=!0),this.$router.push({name:"home",params:{users:e,isVip:this.isVip,points:t.data.data.points}})):this.$Message.error(t.data.content)}))}else this.$Message.error(s.data.content)}))}))},handleSubmit(e){this.$Spin.show(),this.$refs[e].validate((e=>{if(e){let e="http://yun.hbgs.online:8081/kaoshi/index.php?user-phone-logmui",t={args:{username:this.formInline.username,userpassword:this.formInline.password},userlogin:"1",userhash:"0.640034068151828"};t=this.$qs.stringify(t),this.$axios.post(e,t).then((e=>{let t=e.data;200===t.statusCode?setTimeout((()=>{this.$Spin.hide(),this.$Message.success("登录成功！"),this.checkVip(t.users)}),1e3):setTimeout((()=>{this.$Spin.hide(),this.$Message.error(t.message)}),1e3)}))}else setTimeout((()=>{this.$Spin.hide(),this.$Message.error("请检查工号密码是否输入正确！")}),1e3)}))}}},n=i,o=s(3736),p=(0,o.Z)(n,r,a,!1,null,null,null),u=p.exports}}]);
//# sourceMappingURL=login.557b6bbb.js.map